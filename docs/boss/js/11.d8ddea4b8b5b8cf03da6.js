(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1165:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var r=n(74),a=n.n(r),o=n(50),i=n.n(o),c=n(51),u=n.n(c),l=n(52),s=n.n(l),f=n(53),d=n.n(f),p=n(30),y=n.n(p),m=(n(535),n(536)),h=n(0),v=n(513);function g(e,t){if(e&&t){var n,r=t;"number"!=typeof r&&"string"!=typeof r||(r=new Date(r));var a={"Y+":r.getFullYear().toString(),"M+":(r.getMonth()+1).toString(),"D+":r.getDate().toString(),"h+":r.getHours().toString(),"m+":r.getMinutes().toString(),"s+":r.getSeconds().toString()};for(var o in a)(n=new RegExp("("+o+")").exec(e))&&(e=e.replace(n[1],1==n[1].length?a[o]:a[o].padStart(n[1].length,"0")));return e}}var E,S=n(163),D=n(1142);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=m.a.Option,A=Object(v.b)()(E=function(e){s()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y()(e);if(t){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).getData=function(e){r.props.actions.get(S.a.results,{symbol:e}).then((function(e){var t=e||{},n=t.funding_rate,a=void 0===n?[]:n,o=t.k_data;r.setState({data:o,rateData:a})}))},r.getRoitaData=function(){r.props.actions.get(S.a.realtime).then((function(e){r.setState({listData:e||[]})}))},r.renderLineChart=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rate";if(!Array.isArray(e))return h.createElement("span",null,"没有数据");var n=e.map((function(e){return w(w({},e),{},"rate"===t?{date_time:g("YY-MM-DD hh",e.date_time),rate:100*e.rate}:{date_time:g("YY-MM-DD hh",new Date(e.date_time))})}));return h.createElement(D.d,{width:1800,height:400,data:n},h.createElement(D.a,{strokeDasharray:"3 3"}),h.createElement(D.f,{dataKey:"date_time",interval:"preserveStart"}),h.createElement(D.g,{dataKey:t,interval:"preserveStart"}),h.createElement(D.e,null),h.createElement(D.b,null),h.createElement(D.c,{type:"monotone",dataKey:t,stroke:"#82ca9d"}))},r.renderAllChart=function(e){if(!Array.isArray(e))return h.createElement("span",null,"没有数据");var t=e.map((function(e){return w(w({},e),{},{date_time:g("YY-MM-DD hh",e.date_time),rate:100*e.rate})}));return h.createElement(D.d,{width:1800,height:400,data:t},h.createElement(D.a,{strokeDasharray:"3 3"}),h.createElement(D.f,{dataKey:"date_time",interval:"preserveStart"}),h.createElement(D.g,{yAxisId:"left",dataKey:"close"}),h.createElement(D.g,{yAxisId:"right",dataKey:"rate",orientation:"right"}),h.createElement(D.e,null),h.createElement(D.b,null),h.createElement(D.c,{yAxisId:"left",type:"monotone",dataKey:"close",stroke:"orange",dot:""}),h.createElement(D.c,{yAxisId:"right",type:"monotone",dataKey:"rate",stroke:"#82ca9d",dot:""}))},r.renderAntLineChart=function(e){},r.onSelectChange=function(e){console.log(e,"value"),r.getData(e),r.setState({selected:e})},r.renderSelect=function(e){var t=r.state.selected;return h.createElement("div",null,h.createElement("span",{style:{marginRight:10}},"交易对"),h.createElement(m.a,{style:{width:"300px"},defaultValue:t,onChange:r.onSelectChange},e.map((function(e){return h.createElement(O,{value:e.symbol,key:e.symbol},e.symbol)}))))},r.state={data:[],rateData:[],selected:"BTCUSDT",listData:[]},r}return u()(n,[{key:"componentDidMount",value:function(){var e=this.state.selected;this.getData(e),this.getRoitaData()}},{key:"render",value:function(){var e=this.state,t=e.data,n=void 0===t?[]:t,r=e.rateData,a=void 0===r?[]:r,o=e.listData,i=n.map((function(e,t){return w(w({},e),a[t])}));return h.createElement("div",{style:{width:"100%",overflowX:"auto",position:"relative"}},this.renderSelect(o),h.createElement("div",{style:{padding:"50px 50px 50px 0",overflow:"auto"}},this.renderAllChart(i)))}}]),n}(h.PureComponent))||E},513:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return D}));var r=n(524),a=n(124),o=n(125),i=n(69);function c(e){return{$$app:e.app,$$screen:e.screen}}function u(e){return{actions:Object(i.b)(Object.assign(a,r),e)}}function l(e,t){var n=e||c,r=t||u;return function(e){return Object(o.b)(n,r)(e)}}n(209);var s=n(50),f=n.n(s),d=n(51),p=n.n(d),y=n(52),m=n.n(y),h=n(53),v=n.n(h),g=n(30),E=n.n(g),S=n(0);var D=function(e){m()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var a=E()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v()(this,n)}}(n);function n(e){return f()(this,n),t.call(this,e)}return p()(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.actions,n=e.initOption;if(n&&(t.initScreen(n),n.params)){if("actionQuery"===n.initType)return void t.changeScreenActionQuery(n.params);t.changeScreenQuery(n.params)}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.method,n=void 0===t?"get":t,r=e.initOption,a=(r||{}).isFirst;r&&(void 0===a||a)&&this.props.actions.getScreenData({method:n})}},{key:"componentWillUnmount",value:function(){this.props.actions.leaveScreen()}},{key:"render",value:function(){return S.createElement("div",null,this.props.children)}}]),n}(S.Component)},524:function(e,t,n){"use strict";n.r(t),n.d(t,"initScreen",(function(){return i})),n.d(t,"updateScreen",(function(){return c})),n.d(t,"leaveScreen",(function(){return u})),n.d(t,"changeScreenQuery",(function(){return l})),n.d(t,"changeScreenActionQuery",(function(){return s})),n.d(t,"changeScreenSaveStatus",(function(){return f})),n.d(t,"updateScreenCustomProps",(function(){return d})),n.d(t,"receiveScreenData",(function(){return p})),n.d(t,"getScreenData",(function(){return y}));var r=n(130),a=n(61),o=null;function i(e){return{type:a.a.INIT,payload:e}}function c(e){return{type:a.a.UPDATE,payload:e}}function u(e){return window.clearTimeout(o),{type:a.a.LEAVE,meta:{name:e}}}function l(e){return{type:a.a.CHANGE_QUERY,payload:e}}function s(e){return{type:a.a.CHANGE_ACTION_QUERY,payload:e}}function f(e){var t=e.fetchUrl,n=e.query;return function(e){return e(r.a.get(t,n)).then((function(t){return t.success&&e(y()),t}))}}function d(e){return{type:a.a.UPDATE_CUSTOM_PROPS,payload:e}}function p(e){return{type:a.a.RECEIVE_DATA,payload:e,meta:{updateAt:Date.now()}}}function y(e){return function(t,n){var i=n().screen,c=n().app.get("rateInterval"),u=i.getIn(["isFetchInfinite"]),l=i.getIn(["formUrl"]),s=i.getIn(["ajaxMode"]),f=i.getIn(["fetchUrl"])||l,d=i.getIn(["fetchIntervalTime"])||c,m=i.getIn(["actionQuery"]),h={mode:s},v=f,g=i.getIn(["query"])||i.clear();window.clearTimeout(o),t({type:a.a.REQUEST_FETCH_DATA}),g&&g.toJS&&(g=(g=g.merge(m)).toJS()),e&&(e.mode&&(h.mode=e.mode),e.url&&(v=e.url),e.query&&(g=e.query),g.pageNo&&(g.page=g.pageNo));var E=(e||{}).method,S=void 0===E?"get":E;return v?t(r.a[S](v,g,h)).then((function(e){return t(p(e)),u&&d>0&&(o=window.setTimeout((function(){t(y())}),d)),e})):new Promise((function(e){e("Fetch url is need")}))}}}}]);